# RobustIDPS.ai Environment Configuration
# Copy this file to .env and fill in your values

# ==========================================
# Application Settings
# ==========================================
APP_NAME=RobustIDPS.ai
APP_ENV=production
DEBUG=false
SECRET_KEY=change-this-to-a-random-secret-key-min-32-chars
API_VERSION=v1

# Domain & URLs
DOMAIN=robustidps.ai
FRONTEND_URL=https://robustidps.ai
BACKEND_URL=https://robustidps.ai/api
WEBSOCKET_URL=wss://robustidps.ai/ws

# ==========================================
# Database Configuration
# ==========================================
POSTGRES_USER=robustidps
POSTGRES_PASSWORD=change-this-strong-password
POSTGRES_DB=robustidps_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40

# ==========================================
# Redis Configuration
# ==========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Cache TTL (seconds)
CACHE_TTL=300

# ==========================================
# AI Model Configuration
# ==========================================
MODEL_CHECKPOINT_PATH=/app/models/unified_ids.pt
ENABLE_GPU=true
GPU_DEVICE=0
BATCH_SIZE=32
CONFIDENCE_THRESHOLD=0.85

# Model Performance
ENABLE_TORCHSCRIPT=true
ENABLE_QUANTIZATION=false
QUANTIZATION_TYPE=int8

# ==========================================
# Traffic Capture Configuration
# ==========================================
CAPTURE_INTERFACE=eth0
CAPTURE_BUFFER_SIZE=65536
PCAP_FILTER=
MAX_PACKET_SIZE=1518

# Traffic Processing
ENABLE_PACKET_CAPTURE=true
CAPTURE_MODE=passive  # passive, inline, agent
PROCESSING_THREADS=4

# ==========================================
# Detection Engine
# ==========================================
DETECTION_WORKERS=4
MAX_QUEUE_SIZE=10000
PROCESSING_TIMEOUT=5000

# Detection Models (comma-separated)
ENABLED_MODELS=neural_ode,optimal_transport,encrypted_traffic,bayesian

# Real-time Processing
ENABLE_REALTIME=true
REALTIME_WINDOW_SIZE=100
STREAMING_BATCH_SIZE=16

# ==========================================
# Prevention & Firewall
# ==========================================
ENABLE_FIREWALL=true
FIREWALL_BACKEND=iptables  # iptables, nftables, pfsense
AUTO_BLOCK=true
BLOCK_DURATION=3600  # seconds

# IP Whitelist (comma-separated)
WHITELIST_IPS=127.0.0.1,10.0.0.0/8,192.168.0.0/16

# Geographic Blocking
ENABLE_GEO_BLOCKING=false
BLOCKED_COUNTRIES=

# ==========================================
# Alert Configuration
# ==========================================
# Email Alerts
ENABLE_EMAIL_ALERTS=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USER=alerts@robustidps.ai
SMTP_PASSWORD=your-email-password
ALERT_FROM_EMAIL=alerts@robustidps.ai
ALERT_TO_EMAILS=admin@robustidps.ai,security@robustidps.ai

# Slack Alerts
ENABLE_SLACK_ALERTS=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Microsoft Teams
ENABLE_TEAMS_ALERTS=false
TEAMS_WEBHOOK_URL=

# SMS Alerts (Twilio)
ENABLE_SMS_ALERTS=false
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=
ALERT_TO_NUMBERS=

# PagerDuty
ENABLE_PAGERDUTY=false
PAGERDUTY_API_KEY=
PAGERDUTY_SERVICE_ID=

# Custom Webhooks
ENABLE_WEBHOOK_ALERTS=false
WEBHOOK_URL=
WEBHOOK_SECRET=

# Alert Thresholds
ALERT_MIN_CONFIDENCE=0.90
ALERT_RATE_LIMIT=100  # max alerts per minute
ALERT_DEDUPLICATION_WINDOW=60  # seconds

# ==========================================
# Authentication & Security
# ==========================================
# JWT Settings
JWT_SECRET_KEY=change-this-jwt-secret-key
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# OAuth2 (Optional)
ENABLE_OAUTH=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=

# Multi-Factor Authentication
ENABLE_MFA=false
MFA_ISSUER=RobustIDPS.ai

# Session
SESSION_TIMEOUT=3600  # seconds

# ==========================================
# Monitoring & Logging
# ==========================================
# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json
LOG_FILE=/var/log/robustidps/app.log
ENABLE_LOG_ROTATION=true
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=10

# Metrics
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090

# Tracing
ENABLE_TRACING=false
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831

# ==========================================
# Performance & Scaling
# ==========================================
# API Rate Limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# Worker Configuration
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_WORKERS=4

# ==========================================
# Storage & Backup
# ==========================================
# PCAP Storage
PCAP_STORAGE_PATH=/data/pcaps
PCAP_RETENTION_DAYS=7
MAX_PCAP_SIZE_GB=100

# Alert Storage
ALERT_RETENTION_DAYS=90

# Database Backup
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_PATH=/backups
BACKUP_RETENTION_DAYS=30

# ==========================================
# Integration APIs
# ==========================================
# Threat Intelligence
ENABLE_THREAT_INTEL=false
ALIENVAULT_API_KEY=
VIRUSTOTAL_API_KEY=
SHODAN_API_KEY=

# GeoIP
GEOIP_DATABASE_PATH=/data/geoip/GeoLite2-City.mmdb
ENABLE_GEOIP=true

# ==========================================
# Development & Testing
# ==========================================
# Only for development
ENABLE_CORS=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
ENABLE_SWAGGER=true
ENABLE_DEBUG_TOOLBAR=false

# Testing
TEST_DATABASE_URL=postgresql://robustidps:test@postgres:5432/robustidps_test
